<div class="container">
  <h2>Управління списком об'єктів і матрицею попарних порівнянь</h2>

  <!-- Вибір кількості експертів -->
  <div class="expert-controls">
    <button (click)="addExpert()">+</button>
    <button (click)="removeExpert()">-</button>
    <p>Кількість експертів: {{ experts.length }}</p>
  </div>
  <input type="file" (change)="onFileUpload($event)">
  <button (click)="clearExperts()" class="cl-b">Очистити експертів</button>

  <!-- Відображення експертів -->
  <div *ngIf="experts.length > 0">
    <div *ngFor="let expert of experts; let i = index" class="row expert-section">
      
      <!-- Ліва колонка: список -->
      <div class="col film-list">
        <h4>Список об'єктів для {{ expert.name }}</h4>
        <ul>
          <li *ngFor="let obj of expert.objects; let j = index" draggable="true" 
              (dragstart)="onDragStart(i, j)" (dragover)="onDragOver($event)" 
              (drop)="onDrop(i, j)">
            {{ obj.name }}
            <button class="remove-btn" (click)="removeObject(j, i)">×</button>
          </li>
        </ul>
        <input type="text" #newObject placeholder="Новий об'єкт">
        <button (click)="addObject(newObject.value)">Додати об'єкт</button>
      </div>

      <!-- Права колонка: матриця -->
      <div class="col film-matrix">
        <h4>Матриця попарних порівнянь для {{ expert.name }}</h4>
        <table border="1">
          <tr>
            <th></th>
            <th *ngFor="let obj of expert.sortedObjects">{{ obj.name }}</th>
          </tr>
          <tr *ngFor="let row of expert.matrix; let rowIndex = index">
            <td>{{ expert.sortedObjects[rowIndex].name }}</td>
            <td *ngFor="let value of row">{{ value }}</td>
          </tr>
        </table>
      </div>

    </div>
  </div>
</div>
